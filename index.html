<!DOCTYPE html>
<html>
<head>
    <title>Notepad</title>
    <link rel='shortcut icon' type='image/x-icon' href='favicon.ico'/>
    <style>
        body {
            background-color: #9fd6ff;
            padding: 20px;
            font-size: 20px;
            color: #0051ff;
            white-space: pre;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body contenteditable>

<script>
    // service-worker to save the serve offline
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js');
    }
    window.onload = function () {
        var bodyElement = document.getElementsByTagName('body')[0];
        var localStorageContent = localStorage.getItem('notepad');
        bodyElement.innerHTML = localStorageContent === null ? "" : localStorageContent;

        bodyElement.addEventListener('input', function () {
            // Avoid saving to local storage on every input key if they type very fast
            // The function will execute after 500 milli seconds
            setTimeout(function () {
                localStorage.setItem('notepad', bodyElement.innerHTML);
            }, 500);
        });
        console.log(bodyElement.innerHTML);
    }
</script>
</body>

</html>
